# GS-specific upstream overrides.
# These serve as defaults for CI linting and standalone rendering.
# At deploy time, the bundle ConfigMap values deep-merge and can override any of these.
upstream:
  controller:
    additionalLabels:
      giantswarm.io/service-type: "managed"
      application.giantswarm.io/team: "phoenix"
    podLabels:
      giantswarm.io/service-type: "managed"
      application.giantswarm.io/team: "phoenix"
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
    nodeSelector:
      node-role.kubernetes.io/control-plane: ""
    tolerations:
      - key: CriticalAddonsOnly
        operator: Exists
      - key: efs.csi.aws.com/agent-not-ready
        operator: Exists
      - key: node-role.kubernetes.io/control-plane
        operator: Exists
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app: efs-csi-controller
            topologyKey: kubernetes.io/hostname
  node:
    additionalLabels:
      giantswarm.io/service-type: "managed"
      application.giantswarm.io/team: "phoenix"
    podLabels:
      giantswarm.io/service-type: "managed"
      application.giantswarm.io/team: "phoenix"
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: node-role.kubernetes.io/control-plane
                  operator: DoesNotExist
            - matchExpressions:
                - key: eks.amazonaws.com/compute-type
                  operator: NotIn
                  values:
                    - fargate
                    - hybrid

# Extras configuration
networkPolicy:
  enabled: true

verticalPodAutoscaler:
  controller:
    updateMode: "Auto"
    minAllowed:
      cpu: 100m
      memory: 128Mi
    maxAllowed:
      cpu: 400m
      memory: 512Mi
  node:
    updateMode: "Auto"
    minAllowed:
      cpu: 100m
      memory: 128Mi
    maxAllowed:
      cpu: 400m
      memory: 512Mi

global:
  podSecurityStandards:
    enforced: true

storageClasses: []
